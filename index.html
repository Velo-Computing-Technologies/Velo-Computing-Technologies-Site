<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Velo Cloud | Enterprise Android & Web Engineering</title>
    
    <!-- FIX 1: Corrected Library Sources (No more MIME errors) -->
    <script src="https://cdn.jsdelivr.net"></script>
    <script src="https://unpkg.com"></script>
    <link href="https://fonts.googleapis.com" rel="stylesheet">

    <style>
        :root {
            --bg: #050505; --surface: #0a0a0a; --card: #121212;
            --primary: #3ddc84; --secondary: #4285f4; --error: #ff4b4b;
            --text-main: #ffffff; --text-dim: #94a3b8; --border: rgba(255, 255, 255, 0.08);
            --nav-height: 75px;
        }

        /* --- Global Framework --- */
        html, body { background: var(--bg); color: var(--text-main); margin: 0; padding: 0; font-family: 'Plus Jakarta Sans', sans-serif; }
        * { box-sizing: border-box; transition: 0.25s ease; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        .hidden { display: none !important; }

        /* --- Navigation --- */
        nav { position: fixed; top: 0; width: 100%; height: var(--nav-height); background: rgba(5,5,5,0.85); backdrop-filter: blur(25px); border-bottom: 1px solid var(--border); z-index: 2000; display: flex; align-items: center; padding: 0 5%; justify-content: space-between; }
        .logo { font-weight: 800; font-size: 1.4rem; text-decoration: none; color: #fff; display: flex; align-items: center; gap: 10px; }
        .logo span { color: var(--primary); }

        /* --- View Routing --- */
        .view { display: none; min-height: 100vh; padding-top: calc(var(--nav-height) + 40px); animation: fadeIn 0.4s ease; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; } }

        /* --- Landing UI --- */
        .hero { text-align: center; padding: 120px 0 80px; }
        h1 { font-size: clamp(2.5rem, 8vw, 4.5rem); line-height: 1.1; letter-spacing: -2px; margin-bottom: 20px; }
        .hero p { color: var(--text-dim); font-size: 1.2rem; max-width: 650px; margin: 0 auto 40px; }

        /* --- Dashboard UI --- */
        .dash-layout { display: grid; grid-template-columns: 280px 1fr; gap: 40px; }
        .side-nav { background: var(--card); border: 1px solid var(--border); padding: 25px; border-radius: 30px; height: fit-content; }
        .nav-item { width: 100%; text-align: left; background: none; border: none; padding: 14px 18px; border-radius: 14px; color: var(--text-dim); font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
        .nav-item.active { background: rgba(61, 220, 132, 0.1); color: var(--primary); }

        /* --- Auth Portal --- */
        .auth-card { max-width: 420px; margin: 60px auto; background: var(--card); padding: 50px; border-radius: 40px; border: 1px solid var(--border); text-align: center; }
        .field { margin-bottom: 20px; text-align: left; }
        label { display: block; font-size: 0.75rem; font-weight: 800; color: var(--text-dim); margin-bottom: 8px; }
        input { width: 100%; background: #000; border: 1px solid var(--border); padding: 16px; border-radius: 12px; color: #fff; }

        /* --- Buttons --- */
        .btn { padding: 14px 28px; border-radius: 14px; font-weight: 700; cursor: pointer; border: none; display: inline-flex; align-items: center; gap: 10px; font-size: 0.9rem; text-decoration: none; }
        .btn-primary { background: var(--primary); color: #000; }
        .btn-outline { background: transparent; border: 1px solid var(--border); color: #fff; }
    </style>
</head>
<body>

    <nav>
        <a href="#" onclick="App.router('landing')" class="logo">VELO<span>.CLOUD</span></a>
        <div id="auth-nav">
            <button onclick="App.router('login')" class="btn btn-outline" style="padding: 8px 20px; font-size: 0.8rem;">Client Login</button>
        </div>
    </nav>

    <div id="view-landing" class="view container active">
        <section class="hero">
            <h1>Android Specialists. <br> Modern Solutions.</h1>
            <p>Velo Computing Technologies builds high-performance ecosystems from Ume√•, Sweden.</p>
            <div style="display:flex; gap:15px; justify-content:center;">
                <button onclick="App.router('signup')" class="btn btn-primary">Join Velo</button>
                <button onclick="App.router('login')" class="btn btn-outline">Portal Access</button>
            </div>
        </section>
    </div>

    <div id="view-login" class="view container">
        <div class="auth-card">
            <h2>Welcome Back</h2>
            <div class="field"><label>EMAIL</label><input type="email" id="l-email"></div>
            <div class="field"><label>PASSWORD</label><input type="password" id="l-pass"></div>
            <button onclick="Auth.login()" class="btn btn-primary" style="width:100%; justify-content:center;">Sign In</button>
        </div>
    </div>

    <div id="view-signup" class="view container">
        <div class="auth-card">
            <h2>Join Velo</h2>
            <div class="field"><label>EMAIL</label><input type="email" id="s-email"></div>
            <div class="field"><label>PASSWORD</label><input type="password" id="s-pass"></div>
            <button onclick="Auth.signup()" class="btn btn-primary" style="width:100%; justify-content:center;">Sign Up</button>
        </div>
    </div>

    <div id="view-dashboard" class="view container">
        <div class="dash-layout">
            <aside class="side-nav">
                <button onclick="App.router('dashboard')" class="nav-item active">Overview</button>
                <button onclick="Auth.logout()" class="nav-item" style="color:var(--error)">Logout</button>
            </aside>
            <main id="dash-content">
                <h2>Project Console</h2>
                <p id="user-info">Logged in as...</p>
            </main>
        </div>
    </div>

    <script>
        // FIX 2: Correct URL (supabae -> supabase) and your NEW Publishable Key
        const SB_URL = 'https://lqkpxervwakucksrnoss.supabase.co'; 
        const SB_KEY = 'sb_publishable_Sdi0YJz0IPwK9yV-0tLvCw_9IDZQhD8'; 
        
        let sb;

        const App = {
            init() {
                if (typeof supabase === 'undefined') {
                    document.body.innerHTML = `<h2 style="color:white; padding:50px;">Supabase Library failed to load. Please disable ad-blockers.</h2>`;
                    return;
                }
                sb = supabase.createClient(SB_URL, SB_KEY);
                this.checkSession();
                lucide.createIcons();
            },

            async checkSession() {
                const { data: { session } } = await sb.auth.getSession();
                this.updateUI(session);
                sb.auth.onAuthStateChange((_event, session) => this.updateUI(session));
            },

            updateUI(session) {
                const nav = document.getElementById('auth-nav');
                if (session) {
                    nav.innerHTML = `<button onclick="App.router('dashboard')" class="btn btn-outline" style="padding:8px 20px;">${session.user.email}</button>`;
                    document.getElementById('user-info').innerText = "Logged in as: " + session.user.email;
                    this.router('dashboard');
                } else {
                    nav.innerHTML = `<button onclick="App.router('login')" class="btn btn-primary" style="padding:8px 20px;">Client Login</button>`;
                }
            },

            router(view) {
                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                document.getElementById('view-' + view).classList.add('active');
            }
        };

        const Auth = {
            async login() {
                const email = document.getElementById('l-email').value;
                const password = document.getElementById('l-pass').value;
                const { error } = await sb.auth.signInWithPassword({ email, password });
                if (error) alert(error.message);
            },
            async signup() {
                const email = document.getElementById('s-email').value;
                const password = document.getElementById('s-pass').value;
                const { error } = await sb.auth.signUp({ email, password });
                if (error) alert(error.message); else alert('Verification email sent!');
            },
            async logout() { await sb.auth.signOut(); App.router('landing'); }
        };

        window.onload = () => App.init();
    </script>
</body>
</html>
